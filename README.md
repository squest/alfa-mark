# Alfa-benchmark

Benchmarking several clojure libraries for web development and their combinations  
- Servers : http-kit, jetty9, immutant2 (using undertow)  
- Templating : selmer, hiccup, enlive, laser  
- Database : couchdb (clutch), couchbase (couchbase-clj), mysql, redis (carmine)  

## The challenges

First challenge: Render a page with a size-50 loop content grabbed from db (1 query per request) serving 100 requests each time.  

Preliminary results  

The numbers at the end indicates the number of total characters generated by the template  

"Elapsed time: 149.569728 msecs"
:httpkit :selmer couchbase 126100  
"Elapsed time: 1817.772256 msecs"
:httpkit :selmer couchdb 126100  
"Elapsed time: 89.195498 msecs"
:httpkit :selmer mysql 135400  
"Elapsed time: 288.660692 msecs"
:httpkit :selmer redis 126100  
"Elapsed time: 119.518024 msecs"
:httpkit :hiccup couchbase 91200  
"Elapsed time: 1967.130052 msecs"
:httpkit :hiccup couchdb 91200  
"Elapsed time: 80.220526 msecs"
:httpkit :hiccup mysql 97900  
"Elapsed time: 293.966166 msecs"
:httpkit :hiccup redis 91200  
"Elapsed time: 296.06159 msecs"
:httpkit :enlive couchbase 138400  
"Elapsed time: 3128.43194 msecs"
:httpkit :enlive couchdb 138400  
"Elapsed time: 218.170152 msecs"
:httpkit :enlive mysql 149100  
"Elapsed time: 619.490326 msecs"
:httpkit :enlive redis 138400  
"Elapsed time: 239.274888 msecs"
:httpkit :laser couchbase 137700  
"Elapsed time: 2112.795676 msecs"
:httpkit :laser couchdb 137700  
"Elapsed time: 146.91433 msecs"
:httpkit :laser mysql 148400  
"Elapsed time: 484.67185 msecs"
:httpkit :laser redis 137700  
"Elapsed time: 189.127964 msecs"
:undertow :selmer couchbase 126100  
"Elapsed time: 4650.368506 msecs"
:undertow :selmer couchdb 126100  
"Elapsed time: 178.477136 msecs"
:undertow :selmer mysql 135400  
"Elapsed time: 599.650986 msecs"
:undertow :selmer redis 126100  
"Elapsed time: 147.848556 msecs"
:undertow :hiccup couchbase 91200  
"Elapsed time: 2248.149858 msecs"
:undertow :hiccup couchdb 91200  
"Elapsed time: 83.282512 msecs"
:undertow :hiccup mysql 97900  
"Elapsed time: 416.97739 msecs"
:undertow :hiccup redis 91200  
"Elapsed time: 347.89228 msecs"
:undertow :enlive couchbase 138400  
"Elapsed time: 3225.862584 msecs"
:undertow :enlive couchdb 138400  
"Elapsed time: 158.3948 msecs"
:undertow :enlive mysql 149100  
"Elapsed time: 695.036388 msecs"
:undertow :enlive redis 138400  
"Elapsed time: 266.711352 msecs"
:undertow :laser couchbase 137700  
"Elapsed time: 2598.4977 msecs"
:undertow :laser couchdb 137700  
"Elapsed time: 182.999752 msecs"
:undertow :laser mysql 148400  
"Elapsed time: 737.76328 msecs"
:undertow :laser redis 137700  
"Elapsed time: 181.926964 msecs"
:jetty9 :selmer couchbase 126100  
"Elapsed time: 2737.420264 msecs"
:jetty9 :selmer couchdb 126100  
"Elapsed time: 138.015848 msecs"
:jetty9 :selmer mysql 135400  
"Elapsed time: 377.656962 msecs"
:jetty9 :selmer redis 126100  
"Elapsed time: 109.285634 msecs"
:jetty9 :hiccup couchbase 91200  
"Elapsed time: 1858.005702 msecs"
:jetty9 :hiccup couchdb 91200  
"Elapsed time: 128.101054 msecs"
:jetty9 :hiccup mysql 97900  
"Elapsed time: 366.72783 msecs"
:jetty9 :hiccup redis 91200  
"Elapsed time: 253.239568 msecs"
:jetty9 :enlive couchbase 138400  
"Elapsed time: 3505.402812 msecs"
:jetty9 :enlive couchdb 138400  
"Elapsed time: 188.45915 msecs"
:jetty9 :enlive mysql 149100  
"Elapsed time: 424.946328 msecs"
:jetty9 :enlive redis 138400  
"Elapsed time: 270.877602 msecs"
:jetty9 :laser couchbase 137700  
"Elapsed time: 1957.728714 msecs"
:jetty9 :laser couchdb 137700  
"Elapsed time: 171.97705 msecs"
:jetty9 :laser mysql 148400  
"Elapsed time: 362.047906 msecs"
:jetty9 :laser redis 137700  
  
Round 2 : 300 times rendering a page with 20 queries each http-request.  
  
Preliminary result   

"Elapsed time: 594.841916 msecs"
:jetty9 :selmer couchbase 378300  
"Elapsed time: 4503.364768 msecs"
:jetty9 :selmer mysql 378300   
"Elapsed time: 975.967329 msecs"
:jetty9 :selmer redis 378300  
"Elapsed time: 512.400486 msecs"
:jetty9 :hiccup couchbase 273600    
"Elapsed time: 4444.31108 msecs"
:jetty9 :hiccup mysql 273600  
"Elapsed time: 927.765796 msecs"
:jetty9 :hiccup redis 273600  
"Elapsed time: 967.52508 msecs"
:jetty9 :enlive couchbase 415200  
"Elapsed time: 8842.788012 msecs"
:jetty9 :enlive mysql 415200  
"Elapsed time: 1849.074254 msecs"
:jetty9 :enlive redis 415200  
"Elapsed time: 1080.351707 msecs"
:jetty9 :laser couchbase 413100  
"Elapsed time: 4558.380568 msecs"
:jetty9 :laser mysql 413100  
"Elapsed time: 1465.076769 msecs"
:jetty9 :laser redis 413100  

"Elapsed time: 765.412889 msecs"
:http-kit :selmer couchbase 378300  
"Elapsed time: 3324.279894 msecs"
:http-kit :selmer mysql 378300  
"Elapsed time: 1236.40319 msecs"
:http-kit :selmer redis 378300  
"Elapsed time: 534.035628 msecs"
:http-kit :hiccup couchbase 273600  
"Elapsed time: 3140.559958 msecs"
:http-kit :hiccup mysql 273600  
"Elapsed time: 1139.999868 msecs"
:http-kit :hiccup redis 273600  
"Elapsed time: 1210.85898 msecs"
:http-kit :enlive couchbase 328800  
"Elapsed time: 6790.07492 msecs"
:http-kit :enlive mysql 328800  
"Elapsed time: 1876.735768 msecs"
:http-kit :enlive redis 328800  
"Elapsed time: 1403.514364 msecs"
:http-kit :laser couchbase 413100  
"Elapsed time: 3233.401082 msecs"
:http-kit :laser mysql 413100  
"Elapsed time: 1069.104822 msecs"
:http-kit :laser redis 413100  
  
"Elapsed time: 536.823662 msecs"
:undertow :selmer couchbase 378300  
"Elapsed time: 3720.166356 msecs"
:undertow :selmer mysql 378300  
"Elapsed time: 865.819568 msecs"
:undertow :selmer redis 378300  
"Elapsed time: 404.548245 msecs"
:undertow :hiccup couchbase 273600  
"Elapsed time: 3807.636382 msecs"
:undertow :hiccup mysql 273600  
"Elapsed time: 848.082053 msecs"
:undertow :hiccup redis 273600  
"Elapsed time: 934.233224 msecs"
:undertow :enlive couchbase 415200  
"Elapsed time: 7475.753266 msecs"
:undertow :enlive mysql 415200  
"Elapsed time: 1575.864154 msecs"
:undertow :enlive redis 415200  
"Elapsed time: 599.84887 msecs"
:undertow :laser couchbase 413100  
"Elapsed time: 3950.913056 msecs"
:undertow :laser mysql 413100  
"Elapsed time: 1112.180306 msecs"
:undertow :laser redis 413100  

## License

Copyright Â© 2014 PT Zenius Education
