# Alfa-benchmark

Benchmarking several clojure libraries for web development and their combinations  
- Servers : http-kit, jetty9, immutant2 (using undertow)  
- Templating : selmer, hiccup, enlive, laser  
- Database : couchdb (clutch), couchbase (couchbase-clj), mysql, redis (carmine)  

## The challenges

First challenge: Render a page with a size-50 loop content grabbed from db (1 query per request) serving 100 requests each time.  

Preliminary results  

The numbers at the end indicates the number of total characters generated by the template  

"Elapsed time: 149.569728 msecs"
:httpkit :selmer couchbase 126100  
"Elapsed time: 1817.772256 msecs"
:httpkit :selmer couchdb 126100  
"Elapsed time: 89.195498 msecs"
:httpkit :selmer mysql 135400  
"Elapsed time: 288.660692 msecs"
:httpkit :selmer redis 126100  
"Elapsed time: 119.518024 msecs"
:httpkit :hiccup couchbase 91200  
"Elapsed time: 1967.130052 msecs"
:httpkit :hiccup couchdb 91200  
"Elapsed time: 80.220526 msecs"
:httpkit :hiccup mysql 97900  
"Elapsed time: 293.966166 msecs"
:httpkit :hiccup redis 91200  
"Elapsed time: 296.06159 msecs"
:httpkit :enlive couchbase 138400  
"Elapsed time: 3128.43194 msecs"
:httpkit :enlive couchdb 138400  
"Elapsed time: 218.170152 msecs"
:httpkit :enlive mysql 149100  
"Elapsed time: 619.490326 msecs"
:httpkit :enlive redis 138400  
"Elapsed time: 239.274888 msecs"
:httpkit :laser couchbase 137700  
"Elapsed time: 2112.795676 msecs"
:httpkit :laser couchdb 137700  
"Elapsed time: 146.91433 msecs"
:httpkit :laser mysql 148400  
"Elapsed time: 484.67185 msecs"
:httpkit :laser redis 137700  
"Elapsed time: 189.127964 msecs"
:undertow :selmer couchbase 126100  
"Elapsed time: 4650.368506 msecs"
:undertow :selmer couchdb 126100  
"Elapsed time: 178.477136 msecs"
:undertow :selmer mysql 135400  
"Elapsed time: 599.650986 msecs"
:undertow :selmer redis 126100  
"Elapsed time: 147.848556 msecs"
:undertow :hiccup couchbase 91200  
"Elapsed time: 2248.149858 msecs"
:undertow :hiccup couchdb 91200  
"Elapsed time: 83.282512 msecs"
:undertow :hiccup mysql 97900  
"Elapsed time: 416.97739 msecs"
:undertow :hiccup redis 91200  
"Elapsed time: 347.89228 msecs"
:undertow :enlive couchbase 138400  
"Elapsed time: 3225.862584 msecs"
:undertow :enlive couchdb 138400  
"Elapsed time: 158.3948 msecs"
:undertow :enlive mysql 149100  
"Elapsed time: 695.036388 msecs"
:undertow :enlive redis 138400  
"Elapsed time: 266.711352 msecs"
:undertow :laser couchbase 137700  
"Elapsed time: 2598.4977 msecs"
:undertow :laser couchdb 137700  
"Elapsed time: 182.999752 msecs"
:undertow :laser mysql 148400  
"Elapsed time: 737.76328 msecs"
:undertow :laser redis 137700  
"Elapsed time: 181.926964 msecs"
:jetty9 :selmer couchbase 126100  
"Elapsed time: 2737.420264 msecs"
:jetty9 :selmer couchdb 126100  
"Elapsed time: 138.015848 msecs"
:jetty9 :selmer mysql 135400  
"Elapsed time: 377.656962 msecs"
:jetty9 :selmer redis 126100  
"Elapsed time: 109.285634 msecs"
:jetty9 :hiccup couchbase 91200  
"Elapsed time: 1858.005702 msecs"
:jetty9 :hiccup couchdb 91200  
"Elapsed time: 128.101054 msecs"
:jetty9 :hiccup mysql 97900  
"Elapsed time: 366.72783 msecs"
:jetty9 :hiccup redis 91200  
"Elapsed time: 253.239568 msecs"
:jetty9 :enlive couchbase 138400  
"Elapsed time: 3505.402812 msecs"
:jetty9 :enlive couchdb 138400  
"Elapsed time: 188.45915 msecs"
:jetty9 :enlive mysql 149100  
"Elapsed time: 424.946328 msecs"
:jetty9 :enlive redis 138400  
"Elapsed time: 270.877602 msecs"
:jetty9 :laser couchbase 137700  
"Elapsed time: 1957.728714 msecs"
:jetty9 :laser couchdb 137700  
"Elapsed time: 171.97705 msecs"
:jetty9 :laser mysql 148400  
"Elapsed time: 362.047906 msecs"
:jetty9 :laser redis 137700  
  
Second challenge : 100 times rendering a page with 10 queries each http-request.  
  
Preliminary result  

"Elapsed time: 725.083048 msecs"
:httpkit :selmer couchbase 345800  
"Elapsed time: 2967.19849 msecs"
:httpkit :selmer mysql 345800  
"Elapsed time: 610.999246 msecs"
:httpkit :selmer redis 345800  
"Elapsed time: 449.21873 msecs"
:httpkit :hiccup couchbase 250000  
"Elapsed time: 2756.41651 msecs"
:httpkit :hiccup mysql 250000  
"Elapsed time: 552.78829 msecs"
:httpkit :hiccup redis 250000  
"Elapsed time: 578.360054 msecs"
:httpkit :enlive couchbase 384400  
"Elapsed time: 5063.318054 msecs"
:httpkit :enlive mysql 384400  
"Elapsed time: 1105.652554 msecs"
:httpkit :enlive redis 384400  
"Elapsed time: 504.175186 msecs"
:httpkit :laser couchbase 383000  
"Elapsed time: 3471.346218 msecs"
:httpkit :laser mysql 383000  
"Elapsed time: 1032.04144 msecs"
:httpkit :laser redis 383000  
"Elapsed time: 753.039034 msecs"
:undertow :selmer couchbase 345800  
"Elapsed time: 6811.677276 msecs"
:undertow :selmer mysql 345800  
"Elapsed time: 1602.118822 msecs"
:undertow :selmer redis 345800  
"Elapsed time: 652.553178 msecs"
:undertow :hiccup couchbase 250000  
"Elapsed time: 4453.035742 msecs"
:undertow :hiccup mysql 250000  
"Elapsed time: 828.381726 msecs"
:undertow :hiccup redis 250000  
"Elapsed time: 764.496094 msecs"
:undertow :enlive couchbase 384400  
"Elapsed time: 9980.784172 msecs"
:undertow :enlive mysql 384400  
"Elapsed time: 1580.513946 msecs"
:undertow :enlive redis 384400  
"Elapsed time: 605.07087 msecs"
:undertow :laser couchbase 383000  
"Elapsed time: 4838.494088 msecs"
:undertow :laser mysql 383000  
"Elapsed time: 922.012224 msecs"
:undertow :laser redis 383000  
"Elapsed time: 437.285514 msecs"
:jetty9 :selmer couchbase 345800  
"Elapsed time: 4642.713348 msecs"
:jetty9 :selmer mysql 345800  
"Elapsed time: 5964.219196 msecs"
:jetty9 :selmer redis 345800  
"Elapsed time: 626.654968 msecs"
:jetty9 :hiccup couchbase 250000  
"Elapsed time: 5107.7136 msecs"
:jetty9 :hiccup mysql 250000  
"Elapsed time: 994.044906 msecs"
:jetty9 :hiccup redis 250000  
"Elapsed time: 982.651596 msecs"
:jetty9 :enlive couchbase 384400  
"Elapsed time: 9240.170692 msecs"
:jetty9 :enlive mysql 384400  
"Elapsed time: 1679.786934 msecs"
:jetty9 :enlive redis 384400  
"Elapsed time: 540.553482 msecs"
:jetty9 :laser couchbase 383000  
"Elapsed time: 4757.63193 msecs"
:jetty9 :laser mysql 383000  
"Elapsed time: 1089.09505 msecs"
:jetty9 :laser redis 383000  

## License

Copyright Â© 2014 PT Zenius Education
